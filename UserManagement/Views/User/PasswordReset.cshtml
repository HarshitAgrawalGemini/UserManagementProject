<form id="resetForm">
    <input type="email" id="email" required />
    <input type="password" id="newPassword" required />
    <input type="password" id="confirmPassword" required />
    <input type="hidden" id="token" value="@Request.Query["token"]" />
    <button type="submit">Reset Password</button>
</form>

<script>
    document.getElementById('resetForm').addEventListener('submit', async function (e) {
        e.preventDefault();

        const payload = {
            email: document.getElementById('email').value,
            newPassword: document.getElementById('newPassword').value,
            confirmPassword: document.getElementById('confirmPassword').value,
            token: document.getElementById('token').value
        };

        if(newPassword=== confirmPassword){
        const response = await fetch('http://localhost:5020/api/user/reset-password', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify(payload)
        });

        const result = await response.text();
        alert(result);
        }
    });
</script>
