<h2>Reset Password</h2>
<form id="resetForm">
    <input type="hidden" id="email" />
    <input type="hidden" id="token" />

    <input type="password" id="newPassword" placeholder="New Password" required />
    <input type="password" id="confirmPassword" placeholder="Confirm Password" required />
    <button type="submit">Reset Password</button>
</form>

<script>
    const params = new URLSearchParams(window.location.search);
    document.getElementById("email").value = params.get("email");
    document.getElementById("token").value = params.get("token");

    document.getElementById("resetForm").addEventListener("submit", async (e) => {
        e.preventDefault(); 

        const dto = {
            email: document.getElementById("email").value,
            token: document.getElementById("token").value,
            newPassword: document.getElementById("newPassword").value,
            confirmPassword: document.getElementById("confirmPassword").value
        };

        const res = await fetch("http://127.0.0.1:5020/api/user/reset", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify(dto)
        });

        alert(await res.text());
    });
</script>
